# Example Docker Compose for NanoClaw + EverClaw Morpheus inference
#
# The EverClaw proxy runs on the HOST (not in Docker).
# This compose file shows how to configure NanoClaw containers to reach it.

version: "3.8"

services:
  nanoclaw:
    image: nanoclaw/nanoclaw:latest
    extra_hosts:
      # Ensures host.docker.internal resolves on Linux
      # (macOS/Windows Docker Desktop provides this automatically)
      - "host.docker.internal:host-gateway"
    environment:
      # Point to EverClaw proxy on the host
      - MORPHEUS_API_BASE=http://host.docker.internal:8083/v1
      - MORPHEUS_API_KEY=morpheus-local
      - MORPHEUS_DEFAULT_MODEL=glm-5
      # Keep Claude for orchestration (optional)
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
    volumes:
      - nanoclaw-data:/app/data
    restart: unless-stopped

volumes:
  nanoclaw-data:
